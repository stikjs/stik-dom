// Version: 0.5.0 | From: 24-06-2014

!function(stik){function withDependencies(){for(var name in modules)tmpDependencies.hasOwnProperty(name)||(tmpDependencies[name]=modules[name]);return tmpDependencies}var methods={},modules={},tmpDependencies={};stik.dom=function(as,func){if(!as)throw"Stik: DOM needs a name";if(!func||"function"!=typeof func)throw"Stik: DOM needs a function";return modules[as]=stik.injectable({module:func,resolvable:!0}),methods[as]=function(){var func=modules[as].resolve(withDependencies());return func.apply({},arguments)},methods[as]},methods.pushDoubles=function(doubles){for(var name in doubles)tmpDependencies[name]=stik.injectable({module:doubles[name]})},methods.cleanDoubles=function(){tmpDependencies={}},stik.dom.signatures=function(){return Object.keys(modules)},stik.boundary({as:"$dom",to:methods})}(window.stik),function(stik){function isArray(obj){return"[object Array]"===Object.prototype.toString.call(obj)}stik.boundary({as:"$elm",resolvable:!0,to:function($template,$dom){for(var elm={},methods=stik.dom.signatures(),i=methods.length;i--;)!function(method){elm[method]=function(){var args=Array.prototype.slice.call(arguments);return args.unshift($template),$dom[method].apply({},args)}}(methods[i]);return elm}}),stik.dom("hasClass",function(){return function(elm,selector){if(elm.classList)return elm.classList.contains(selector);var className=" "+selector+" ";return(" "+elm.className+" ").replace(/[\t\r\n\f]/g," ").indexOf(className)>=0}}),stik.dom("removeClass",function(hasClass){return function(elm,className){var classNames=[];classNames=isArray(className)?className:className.split(" ");for(var i=0;i<classNames.length;i++)if(elm.classList)elm.classList.remove(classNames[i]);else if(hasClass(elm,classNames[i])){var regex=new RegExp("(^|\\s)?"+classNames[i]+"(\\s|$)","g");elm.className=elm.className.replace(regex," ").trim()}}}),stik.dom("addClass",function(hasClass){return function(elm,className){var classNames=[];classNames=isArray(className)?className:className.split(" ");for(var i=0;i<classNames.length;i++)hasClass(elm,classNames[i])||(elm.classList?elm.classList.add(classNames[i]):elm.className=(elm.className+" "+classNames[i]).trim())}}),stik.dom("toggleClass",function(hasClass,addClass,removeClass){return function(elm,selector,forceAdd){forceAdd===!0?addClass(elm,selector):forceAdd===!1?removeClass(elm,selector):hasClass(elm,selector)?removeClass(elm,selector):hasClass(elm,selector)||addClass(elm,selector)}}),stik.dom("hide",function(){return function(elm){elm.style.display="none"}}),stik.dom("isHidden",function(){return function(elm){return null===elm.offsetParent}}),stik.dom("isVisible",function(isHidden){return function(elm){return!isHidden(elm)}}),stik.dom("show",function(){return function(elm){elm.style.display="block"}}),stik.dom("remove",function(){return function(elm){elm.parentNode.removeChild(elm)}}),stik.dom("parse",function(){return function(elmStr){var tmp=document.implementation.createHTMLDocument();return tmp.body.innerHTML=elmStr,tmp.body.children>1?tmp.body.childNodes:tmp.body.firstChild}}),stik.dom("append",function(){return function(parent,newChild){if("string"==typeof newChild){var div=document.createElement("div");for(div.innerHTML=newChild;div.firstChild;)parent.appendChild(div.firstChild)}else parent.appendChild(newChild)}}),stik.dom("prepend",function(insertBefore,append){return function(parent,newChild){parent.childNodes.length>0?insertBefore(parent.firstChild,newChild):append(parent,newChild)}}),stik.dom("insertAfter",function(){return function(referenceNode,newChild){"string"==typeof newChild?referenceNode.insertAdjacentHTML("afterend",newChild):referenceNode.parentNode.insertBefore(newChild,referenceNode.nextSibling)}}),stik.dom("insertBefore",function(){return function(referenceNode,newChild){"string"==typeof newChild?referenceNode.insertAdjacentHTML("beforebegin",newChild):referenceNode.parentNode.insertBefore(newChild,referenceNode)}}),stik.dom("data",function(){return function(elm){function parseName(name){return toCamelCase(name.match(/(data-)(.+)/)[2])}function toCamelCase(name){return name.replace(/-([a-z])/g,function(match){return match[1].toUpperCase()})}var attr,name,attrs={};for(attr in elm.attributes)elm.attributes[attr].value&&(name=elm.attributes[attr].name,name.match(/^data-/m)&&(attrs[parseName(name)]=elm.attributes[attr].value));return attrs}}),stik.dom("contains",function(){return function(elm,child){return"string"==typeof child?null!==el.querySelector(selector):elm!==child&&elm.contains(child)}}),stik.dom("filter",function(){return function(elm,selector){return Array.prototype.filter.call(elm.querySelectorAll(selector),filterFn)}}),stik.dom("position",function(){return function(elm){return{left:elm.offsetLeft,top:elm.offsetTop}}}),stik.dom("siblings",function(){return function(elm){return Array.prototype.filter.call(elm.parentNode.children,function(child){return child!==elm})}}),stik.boundary({as:"$data",resolvable:!0,to:function($template,$dom){return $dom.data($template)}})}(window.stik),function(stik){stik.dom("serialize",function(){return function(form,asObj){var i,j,q;if(form&&"FORM"===form.nodeName){for(i=j=void 0,q=[],i=form.elements.length-1;i>=0;)if(""!==form.elements[i].name){switch(form.elements[i].nodeName){case"INPUT":switch(form.elements[i].type){case"text":case"hidden":case"password":case"button":case"reset":case"submit":q.push(form.elements[i].name+"="+encodeURIComponent(form.elements[i].value));break;case"checkbox":case"radio":form.elements[i].checked&&q.push(form.elements[i].name+"="+encodeURIComponent(form.elements[i].value));break;case"file":}break;case"TEXTAREA":q.push(form.elements[i].name+"="+encodeURIComponent(form.elements[i].value));break;case"SELECT":switch(form.elements[i].type){case"select-one":q.push(form.elements[i].name+"="+encodeURIComponent(form.elements[i].value));break;case"select-multiple":for(j=form.elements[i].options.length-1;j>=0;)form.elements[i].options[j].selected&&q.push(form.elements[i].name+"="+encodeURIComponent(form.elements[i].options[j].value)),j-=1}break;case"BUTTON":switch(form.elements[i].type){case"reset":case"submit":case"button":q.push(form.elements[i].name+"="+encodeURIComponent(form.elements[i].value))}}i-=1}else i-=1;if(asObj){for(var name,value,obj={},i=0;i<q.length;i++)name=q[i].split("=")[0],value=q[i].split("=")[1],obj[name]=value;return obj}return q.join("&")}}})}(window.stik);